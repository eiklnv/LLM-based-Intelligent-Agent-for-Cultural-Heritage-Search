# RelicSeek 用户指南

本指南将帮助您充分利用RelicSeek文物搜索智能体系统的所有功能。

## 目录

1. [快速入门](#快速入门)
2. [Web界面使用](#web界面使用)
3. [命令行使用](#命令行使用)
4. [搜索技巧](#搜索技巧)
5. [结果解读](#结果解读)
6. [高级功能](#高级功能)
7. [最佳实践](#最佳实践)

## 快速入门

### 第一次使用

1. **启动系统**
   ```bash
   # Web界面
   streamlit run app.py
   
   # 或命令行
   python relicseek_cli.py search
   ```

2. **初始化引擎**
   - Web界面：点击侧边栏"🚀 初始化引擎"
   - 命令行：系统会自动初始化

3. **进行搜索**
   - 输入文物相关查询，如"青铜鼎"、"唐三彩"
   - 等待系统分析和搜索
   - 查看详细结果报告

## Web界面使用

### 界面布局

```
┌─────────────────────────────────────────────────────────┐
│                    主标题区域                           │
├───────────────┬─────────────────────────────────────────┤
│               │                                         │
│   侧边栏      │            主要内容区域                 │
│               │                                         │
│ • 系统控制    │ • 搜索输入框                           │
│ • 状态显示    │ • 高级选项                             │
│ • 配置管理    │ • 搜索结果                             │
│ • 会话管理    │ • 详细分析                             │
│ • 搜索历史    │                                         │
│               │                                         │
└───────────────┴─────────────────────────────────────────┘
```

### 基本操作

#### 1. 系统初始化

首次使用需要初始化引擎：

1. 点击侧边栏"🚀 初始化引擎"按钮
2. 等待初始化完成
3. 查看系统状态确认正常

#### 2. 基础搜索

1. 在搜索框中输入查询内容
2. 点击"🔍 搜索"按钮
3. 查看搜索进度和结果

**示例查询：**
- `青铜鼎`
- `唐代三彩马`
- `清明上河图`
- `元青花瓷器`
- `汉代玉璧`

#### 3. 高级搜索选项

展开"🔧 高级搜索选项"可以调整：

- **最大搜索轮次**: 控制智能体的迭代次数（1-10）
- **包含图片搜索**: 是否在搜索中包含图片信息
- **质量阈值**: 设置结果质量的最低要求（0.0-1.0）
- **验证轮数**: 多轮验证的次数（1-5）

### 结果界面

搜索完成后，结果以多个标签页展示：

#### 📖 最终报告
- 结构化的文物信息摘要
- 包含基本信息、历史背景、艺术特征等
- 可直接复制或分享

#### 🔍 搜索过程
- 查询分析结果
- 搜索策略详情
- 智能体推理过程

#### 📊 详细数据
- 原始搜索数据（JSON格式）
- 智能体执行步骤
- 中间处理结果

#### 🔬 质量分析
- 质量评分和置信度
- 改进建议
- 系统反思内容

### 侧边栏功能

#### 系统控制
- **初始化引擎**: 启动或重启系统引擎
- **系统状态**: 实时显示引擎运行状态

#### 配置管理
- **验证系统设置**: 检查配置文件和API连接
- **重新加载配置**: 热更新配置文件

#### 会话管理
- **清除会话**: 清空当前会话的历史记录
- **会话信息**: 显示当前会话ID和搜索统计

#### 搜索历史
- 显示最近5次搜索记录
- 可查看历史搜索的详细信息

## 命令行使用

### 基本命令

```bash
# 查看帮助
python relicseek_cli.py --help

# 初始化引擎
python relicseek_cli.py init

# 交互式搜索
python relicseek_cli.py search

# 单次搜索
python relicseek_cli.py search -q "青铜鼎"

# 验证系统
python relicseek_cli.py validate

# 查看状态
python relicseek_cli.py status
```

### 交互式搜索模式

启动交互模式后：

```
🏺 RelicSeek 文物搜索智能体
交互式搜索模式 - 输入 'exit' 或 'quit' 退出

🔍 请输入您要搜索的文物信息: 青铜鼎
🤖 智能体正在搜索中...
```

系统会显示：
- 搜索进度指示
- 详细的搜索结果
- 质量评估信息
- 是否继续搜索的询问

### 结果导出

```bash
# 搜索并导出为JSON
python relicseek_cli.py search -q "唐三彩" -o results.json

# 导出为文本格式
python relicseek_cli.py search -q "青花瓷" -o results.txt
```

### 配置自定义

```bash
# 使用自定义配置目录
python relicseek_cli.py -c /path/to/config search

# 查看当前配置
python relicseek_cli.py config

# 以JSON格式输出配置
python relicseek_cli.py config --format json
```

## 搜索技巧

### 1. 查询类型

系统支持多种类型的查询：

#### 精确匹配查询
```
青铜司母戊鼎
清明上河图
五牛图
```

#### 属性搜索查询
```
唐代三彩马
宋代青瓷
明代青花瓷
汉代玉器
```

#### 关联搜索查询
```
王羲之的书法作品
故宫博物院的青铜器
河南出土的文物
丝绸之路相关文物
```

#### 比较搜索查询
```
唐三彩和宋三彩的区别
青花瓷和粉彩瓷的对比
```

### 2. 关键词技巧

#### 使用具体的文物名称
- ✅ `司母戊鼎`
- ❌ `鼎`

#### 包含时代信息
- ✅ `唐代金银器`
- ❌ `金银器`

#### 添加地理信息
- ✅ `陕西出土的兵马俑`
- ❌ `兵马俑`

#### 指定材质工艺
- ✅ `青铜錾刻工艺`
- ❌ `錾刻`

### 3. 复杂查询

对于复杂查询，可以分步进行：

```
第一步：搜索 "唐代金银器"
第二步：搜索 "何家村金银器"
第三步：搜索 "舞马衔杯银壶"
```

## 结果解读

### 质量评分系统

系统使用5分制评分：

- **5.0分**: 优秀 - 信息完整、来源权威、描述详细
- **4.0分**: 良好 - 信息较完整、来源可靠
- **3.0分**: 一般 - 信息基本完整、来源一般
- **2.0分**: 较差 - 信息不完整、来源存疑
- **1.0分**: 很差 - 信息严重缺失、来源不可靠

### 置信度等级

- **高 (High)**: 多个权威来源验证，信息一致
- **中 (Medium)**: 部分来源验证，信息基本一致
- **低 (Low)**: 单一来源或信息存在冲突

### 信息来源分级

1. **官方博物馆网站** - 最高权威性
2. **学术机构和大学** - 高权威性
3. **权威百科网站** - 中等权威性
4. **专业文化媒体** - 一般权威性
5. **商业网站** - 较低权威性

### 报告结构解读

#### 基本信息
- 文物名称、年代、材质、尺寸
- 发现地点、保存状况

#### 历史背景
- 制作时代的历史特点
- 相关历史人物和事件
- 文物的历史价值

#### 艺术特征
- 造型设计特点
- 装饰工艺技法
- 艺术风格特色

#### 现状信息
- 当前收藏机构
- 展览展示情况
- 保护修复状况

## 高级功能

### 1. 多轮对话搜索

系统支持上下文相关的多轮搜索：

```
用户: 青铜鼎
系统: [返回青铜鼎的详细信息]

用户: 它是在哪里发现的？
系统: [基于前面的搜索结果回答发现地点]

用户: 同时期还有什么类似的文物？
系统: [搜索同时期的类似青铜器]
```

### 2. 自定义搜索策略

通过高级选项调整搜索行为：

- **保守策略**: 高质量阈值、多轮验证
- **快速策略**: 低迭代次数、基础验证
- **全面策略**: 最大迭代、包含图片

### 3. 结果验证机制

系统自动进行多层验证：

1. **一致性验证**: 对比不同来源的信息
2. **完整性验证**: 检查关键信息项的完整度
3. **权威性验证**: 评估信息来源的可信度
4. **逻辑性验证**: 检查信息的内在逻辑

### 4. 批量搜索

命令行支持批量搜索：

```bash
# 创建查询文件
echo "青铜鼎\n唐三彩\n清明上河图" > queries.txt

# 批量处理
cat queries.txt | while read query; do
  python relicseek_cli.py search -q "$query" -o "result_${query}.json"
done
```

## 最佳实践

### 1. 搜索策略

#### 从宽到窄
```
步骤1: 搜索 "青花瓷"（了解整体概况）
步骤2: 搜索 "明代青花瓷"（缩小范围）
步骤3: 搜索 "永乐青花瓷"（具体时期）
```

#### 多角度验证
```
角度1: 从文物名称搜索
角度2: 从历史背景搜索  
角度3: 从收藏机构搜索
角度4: 从考古发现搜索
```

### 2. 质量控制

#### 设置合适的质量阈值
- 学术研究：0.8-1.0
- 一般了解：0.6-0.8
- 初步探索：0.4-0.6

#### 关注权威来源
优先参考以下来源的信息：
- 故宫博物院
- 中国国家博物馆
- 各省市博物馆
- 考古研究所
- 大学考古系

### 3. 效率优化

#### 合理设置参数
```json
{
  "快速搜索": {
    "max_iterations": 3,
    "verification_rounds": 2,
    "quality_threshold": 0.6
  },
  "深度搜索": {
    "max_iterations": 5,
    "verification_rounds": 3,
    "quality_threshold": 0.8
  }
}
```

#### 利用搜索历史
- 查看之前的搜索结果
- 基于历史结果进行关联搜索
- 避免重复搜索相同内容

### 4. 结果应用

#### 学术写作
- 记录信息来源
- 标注可信度等级
- 进行交叉验证

#### 教育普及
- 关注易懂的描述
- 选择有图片的结果
- 突出文化价值

#### 收藏鉴定
- 重点关注技术细节
- 对比同类文物特征
- 验证历史信息

## 故障排除

### 常见问题

#### 搜索结果质量差
1. 检查查询关键词是否准确
2. 提高质量阈值设置
3. 增加验证轮数

#### 搜索速度慢
1. 降低最大迭代次数
2. 减少搜索结果数量
3. 检查网络连接

#### 无法找到相关信息
1. 尝试不同的关键词组合
2. 扩大搜索范围
3. 使用更通用的术语

### 获取帮助

- 查看系统日志文件：`logs/relicseek.log`
- 使用验证命令检查配置：`python relicseek_cli.py validate`
- 提交Issue到项目仓库

## 进阶应用

### 1. API集成

```python
from relicseek.engine.core import RelicSeekEngine

# 创建引擎实例
engine = RelicSeekEngine()

# 执行搜索
result = engine.search("青铜鼎")

# 处理结果
if result['success']:
    print(result['report'])
```

### 2. 自定义配置

创建专用配置文件：

```json
{
  "engine": {
    "model": {
      "temperature": 0.3,
      "model_name": "gpt-3.5-turbo"
    },
    "search": {
      "quality_threshold": 0.9,
      "verification_rounds": 4
    }
  }
}
```

### 3. 扩展开发

```python
# 自定义搜索工具
from relicseek.engine.tools import RelicSearchToolkit

class CustomSearchTool:
    def search_custom_database(self, query):
        # 实现自定义搜索逻辑
        pass

# 集成到系统中
toolkit = RelicSearchToolkit(config)
toolkit.add_custom_tool(CustomSearchTool())
```

---

这份用户指南涵盖了RelicSeek的主要功能和使用技巧。随着您使用经验的积累，您会发现更多高效使用系统的方法。如有疑问，请参考相关文档或联系技术支持。
